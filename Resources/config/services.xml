<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>
        <service id="jose.signer" class="SpomkyLabs\Jose\Signer">
            <call method="setJWAManager">
                <argument type="service" id="jose.algorithm_manager" />
            </call>
            <call method="setJWTManager">
                <argument type="service" id="jose.jwt_manager" />
            </call>
            <call method="setPayloadConverter">
                <argument type="service" id="jose.payload_converter_manager" />
            </call>
        </service>

        <service id="jose.loader" class="SpomkyLabs\Jose\Loader">
            <call method="setJWAManager">
                <argument type="service" id="jose.algorithm_manager" />
            </call>
            <call method="setJWTManager">
                <argument type="service" id="jose.jwt_manager" />
            </call>
            <call method="setJWKManager">
                <argument type="service" id="jose.jwk_manager" />
            </call>
            <call method="setJWKSetManager">
                <argument type="service" id="jose.jwkset_manager" />
            </call>
            <call method="setCheckerManager">
                <argument type="service" id="jose.checker_manager" />
            </call>
            <call method="setPayloadConverter">
                <argument type="service" id="jose.payload_converter_manager" />
            </call>
            <call method="setCompressionManager">
                <argument type="service" id="jose.compression_manager" />
            </call>
        </service>

        <service id="jose.encrypter" class="SpomkyLabs\Jose\Encrypter">
            <call method="setJWAManager">
                <argument type="service" id="jose.algorithm_manager" />
            </call>
            <call method="setJWTManager">
                <argument type="service" id="jose.jwt_manager" />
            </call>
            <call method="setPayloadConverter">
                <argument type="service" id="jose.payload_converter_manager" />
            </call>
            <call method="setCompressionManager">
                <argument type="service" id="jose.compression_manager" />
            </call>
        </service>

        <service id="jose.algorithm_manager" class="SpomkyLabs\Jose\JWAManager" />

        <service id="jose.jwk_manager.default" class="SpomkyLabs\Jose\JWKManager" />

        <service id="jose.jwkset_manager.default" class="SpomkyLabs\JoseBundle\Model\JWKSetManager">
            <call method="setJWKManager">
                <argument type="service" id="jose.jwk_manager" />
            </call>
        </service>

        <service id="jose.jwt_manager.default" class="SpomkyLabs\Jose\JWTManager" />

        <service id="jose.compression_manager" class="SpomkyLabs\Jose\Compression\CompressionManager" public="false" />

        <service id="jose.payload_converter_manager" class="SpomkyLabs\Jose\Payload\PayloadConverterManager" public="false" />

        <service id="jose.checker_manager" class="SpomkyLabs\Jose\Checker\CheckerManager" public="false" />
    </services>
</container>
